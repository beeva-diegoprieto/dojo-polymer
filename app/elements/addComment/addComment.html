<link rel="import" href="../../../bower_components/polymer/polymer.html">


<dom-module name="add-comment">
  <template>
    <form is="iron-form" id="commentform">
      <h3 class="page-title">
        Añade otro comentario
      </h3>
      <paper-input label="Mi opinión sobre este vino es ..."  bind-value="{{review}}"></paper-input>
      <paper-button raised on-click="addComment">Enviar Comentario</paper-button>
    </form>
  </template>
  <script>
    Polymer({

      is: 'add-comment',

      properties:{
        url:String,
      },

      ready: function()
      {
        this.async(function () {
          this.url="https://vinos.firebaseio.com/lista_vinos/"+this.id_wine+"/reviews";
        }, 50);
      },

      addComment: function ()
      {
        var reviews = new Firebase(this.url);


        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth()+1;
        var yyyy = today.getFullYear();

        if(dd<10) {
          dd='0'+dd
        }

        if(mm<10) {
          mm='0'+mm
        }

        today = mm+'/'+dd+'/'+yyyy;
        reviews.push({'date': today, 'msg':this.review});
      }
    });
  </script>

</dom-module>
